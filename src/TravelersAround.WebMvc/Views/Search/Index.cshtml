@model TravelersAround.ServiceProxy.ViewModels.SearchView

@{
    ViewBag.Title = "Look for travelers around you";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Travelers around you right now</h2>

<div>
    @using (Html.BeginForm()) {
        
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Define your search</legend>

            <div class="editor-field">
                @Html.EditorFor(model => model.IncludeOfflineTravelers)
                @Html.LabelFor(model => model.IncludeOfflineTravelers)
                @Html.ValidationMessageFor(model => model.IncludeOfflineTravelers)
            </div>

            <p>
                <input type="submit" value="Search" />
            </p>
        </fieldset>
    }
</div>

<table>
    <tr>
        <th>
            IsOnline
        </th>
        <th>
            Firstname
        </th>
        <th>
            Lastname
        </th>
        <th>
            Age
        </th>
        <th>
            StatusMessage
        </th>
        <th>
            Gender
        </th>
        <th>
            City
        </th>
        <th>
            Country
        </th>
        <th>
            IsAvailable
        </th>
        <th></th>
    </tr>

@foreach (var traveler in Model.Travelers)
{
    <tr>
        <td>
            @traveler.IsOnline
        </td>
        <td>
            @traveler.Firstname
        </td>
        <td>
            @traveler.Lastname
        </td>
        <td>
            @DateTime.Parse(traveler.Birthdate).ToShortDateString()
        </td>
        <td>
            @traveler.StatusMessage
        </td>
        <td>
            @traveler.Gender
        </td>
        <td>
            @traveler.City
        </td>
        <td>
            @traveler.Country
        </td>
        <td>
            @traveler.IsAvailable
        </td>
        <td>
            @Html.ActionLink("Add to friends list", "Add", new { controller = "Friends", id = traveler.TravelerID }) |
            @Html.ActionLink("Send message", "Send", new { controller = "Messages", id = traveler.TravelerID })
        </td>
    </tr>
}

</table>

